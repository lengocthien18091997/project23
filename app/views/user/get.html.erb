<!DOCTYPE html>
<html>
<head>
  <title>Find user</title>
  <%= csrf_meta_tags %>
  <%= csp_meta_tag %>
  <%= stylesheet_link_tag "application", media: "all", "data-turbo-track": "reload" %>
  <%= javascript_include_tag "application", "data-turbo-track": "reload", defer: true %>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-..." crossorigin="anonymous">
</head>
<body class="index">

<%= render "common/header" %>

<h2>Cập nhật thông tin</h2>

<%= render "common/notice" %>

<%= form_with model: @current_user, url: user_update_path, method: :post, local: true, class: "update-form" do |f| %>
  <div class="form-group">
    <%= f.label :full_name, "Họ tên" %>
    <%= f.text_field :full_name, class: "form-control", placeholder: "Nhập họ tên..." %>
  </div>

  <div class="form-group">
    <%= f.label :email, "Email" %>
    <%= f.email_field :email, class: "form-control", placeholder: "Nhập email..." %>
  </div>

  <div class="form-group">
    <%= f.label :phone_number, "Số điện thoại" %>
    <%= f.text_field :phone_number, class: "form-control", placeholder: "Nhập số điện thoại..." %>
  </div>

  <div class="form-group">
    <%= f.label :gender, "Giới tính" %>
    <%= f.select :gender, [["nam", "male"], ["nữ", "female"]],
                 { prompt: "Chọn giới tính" },
                 class: "form-control" %>
  </div>

  <div class="form-group">
    <%= f.label :date_of_birth, "Ngày sinh" %>
    <%= f.date_select :date_of_birth,
                      start_year: 1900,
                      end_year: Time.current.year,
                      order: [:day, :month, :year],
                      class: "form-control" %>
  </div>

  <%if @current_user.role == 'teacher' %>
    <%= f.fields_for :teacher_profile do |tp| %>
      <div class="form-group">
        <%= tp.label :bio, "Giới thiệu" %>
        <%= tp.text_field :bio, class: "form-control", placeholder: "Nhập bio..." %>
      </div>

      <div class="form-group">
        <%= tp.label :education_level, "Trình độ" %>
        <%= tp.text_field :education_level, class: "form-control", placeholder: "Nhập trình độ..." %>
      </div>

      <div class="form-group">
        <%= tp.label :experience_years, "Số năm kinh nghiệm" %>
        <%= tp.text_field :experience_years, class: "form-control", placeholder: "Nhập số năm kinh nghiệm..." %>
      </div>

      <div class="form-group">
        <%= tp.label :location, "Tỉnh/TP" %>
        <%= tp.text_field :location, class: "form-control", placeholder: "Nhập tỉnh/TP hiện tại..." %>
      </div>

      <div class="form-group">
        <%= tp.label :hourly_rate, "Offer" %>
        <%= tp.text_field :hourly_rate, class: "form-control", placeholder: "Nhập offer theo giờ..." %>
      </div>

      <%= render "common/choose_subject" %>

      <%= render "common/choose_time" %>
    <% end %>
  <%end%>

  <div class="form-check">
    <%= f.check_box :is_locked, class: "form-check-input" %>
    <%= f.label :is_locked, "Khóa tài khoản", class: "form-check-label" %>
  </div>

  <div class="form-actions mt-3">
    <%= f.submit "Cập nhật", class: "btn btn-success" %>
    <%= link_to "Hủy", user_update_path, class: "btn btn-secondary" %>
  </div>
<% end %>


</body>
</html>
